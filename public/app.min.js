"use strict";function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var Bookmark=function(){function o(e,n){_classCallCheck(this,o),this.elementId=e;this.options=_extends({},{},n);var t=document.getElementById(this.elementId);if(t){t.addEventListener("click",this.handleClick.bind(this));t.innerHTML="<div>\n      <svg xmlns='http://www.w3.org/2000/svg' class='bookmarkBtn' viewBox='0 0 512 512'>\n        <title>Bookmark</title>\n        <path d='M352 48H160a48 48 0 00-48 48v368l144-128 144 128V96a48 48 0 00-48-48z' fill='none' stroke='currentColor'\n          stroke-linecap='round' stroke-linejoin='round' stroke-width='32' />\n        </svg>\n        <div class='bookmarkPopup' id='bookmarkPopup'></div>\n        <div class='bookmarkContainer' id='bookmarkContainer'>\n          <div class='bookmark-topline'>\n            <span>Bookmarks</span><button class='createNew'>Create new bookmark</button>\n          </div>\n          <div class='btn'>\n          </div>\n          <div>\n            <input class='search' type='search' id=\"myInput\" placeholder=\"Search\" onkeyup\">\n          </div>\n          <hr>\n          <div class='public'>\n            <svg class='caret' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 512 512'>\n              <title>Caret Down</title>\n              <path\n                d='M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z' />\n            </svg>\n            <span>Public bookmarks <span id=\"publicCount\">(0)</span></span>\n            <div id=\"public-placeholder\"><p class='public-text'>You have no public bookmarks</p>\n            <p class='public-text'>Right-click on a bookmark and select 'Make public'.</p>\n            </div>\n          </div>\n          <div class='my-bookmarks'>\n            <div class=\"caret-div\">\n            <svg class='caret' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 512 512'>\n              <title>Caret Down</title>\n              <path\n                d='M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z' />\n            </svg>\n            <span>My bookmarks <span id=\"myBookmarkCount\">(0)</span></span>\n            <div id=\"mybookmarks-placeholder\"><p class='public-text'>You have no public bookmarks</p>\n            <p class='public-text'>Right-click on a bookmark and select 'Make public'.</p>\n            </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class='createNewPopup' id='createForm'>\n    <div class='createTopline'>\n      <h2>Create bookmark</h2>\n      <hr>\n      <svg xmlns='http://www.w3.org/2000/svg' class='closeCreate' viewbox='0 0 512 512'>\n        <title>Close</title>\n        <path fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='32'\n          d='M368 368L144 144M368 144L144 368' />\n      </svg><br>\n    </div>\n    <div>\n    <label for='bookmarkName'>Title</label><br>\n      <input type='text' id='bookmarkName' name='bookmarkName'>\n      <label for='bookmarkDescription'>Description <span class='optional'>(optional)</span></label><br>\n      <input type='text' id='bookmarkDescription' name='bookmarkDescription'>\n      <button class='createSubmit' id='createSubmit'>Create</button>\n    </div>\n  </div>\n    ",this.render()}}return _createClass(o,[{key:"render",value:function(){var o=document.getElementById("bookmarkName"),a=document.getElementById("bookmarkDescription"),i=document.getElementById("publicCount"),s=[],l=(document.getElementById("myBookmarkCount"),[]);this.options.app.createSessionObject({qInfo:{qId:"BookmarkList",qType:"BookmarkList"},qBookmarkListDef:{qType:"bookmark",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description",sheetId:"/sheetId",selectionFields:"/selectionFields",creationDate:"/creationDate"}}}).then(function(e){e.getLayout().then(function(e){console.log(e),e.qBookmarkList.qItems.forEach(function(e){!0===e.qMeta.published?s.push(e):l.push(e)});var n="";s.forEach(function(e){n+='\n            <div>\n            <ul id="myUL">\n              <li class="public-li">'.concat(e.qMeta.title,"</li>\n              <hr>\n              </ul>\n            </div>")});var t="";l.forEach(function(e){t+='\n              <div>\n              <ul>\n               <li class="my-bookmarks-li">\n               '.concat(o.value,"\n               </li>\n               <p>").concat(a.value,"</p>\n              </div>\n              ")}),document.getElementById("public-placeholder").innerHTML=n,document.getElementById("mybookmarks-placeholder").innerHTML=t,i.textContent="("+s.length+")"})})}},{key:"handleClick",value:function(e){var n=document.getElementById("bookmarkName"),t=document.getElementById("bookmarkDescription");e.target.classList.contains("bookmarkBtn")&&openForm(),e.target.classList.contains("bookmarkPopup")&&closeForm(),e.target.classList.contains("createNew")&&createNewBookmark(),e.target.classList.contains("closeCreate")&&closeBookmark(),e.target.classList.contains("caret")&&closeLi(),e.target.classList.contains("caret")&&openLi(),e.target.classList.contains("createSubmit")&&(this.options.app.createBookmark({qInfo:{qType:"bookmark"},qMetaDef:{title:"".concat(n.value),description:"".concat(t.value)}}),closeBookmark())}}]),o}();function openForm(){var e=document.getElementById("bookmarkPopup");e&&(e.style.display="block");var n=document.getElementById("bookmarkContainer");n&&(n.style.display="block")}function closeForm(){document.getElementById("bookmarkPopup").style.display="none";var e=document.getElementById("bookmarkContainer");e&&(e.style.display="none")}function createNewBookmark(){document.getElementById("createForm").style.display="flex"}function closeBookmark(){document.getElementById("createForm").style.display="none"}function openLi(){document.getElementById("public-li").style.display="block"}function closeLi(){document.getElementById("public-li").style.display="none"}function searchFunction(){var e,n,t;for(e=document.getElementById("myInput").value.toUpperCase(),n=document.getElementById("myUL").getElementsByTagName("li"),t=0;t<n.length;t++)-1<((n=n[t].getElementsByTagName("li")[0]).textContent||n.innerText).toUpperCase().indexOf(e)?n[t].style.display="":n[t].style.display="none"}var session=enigma.create({schema:schema,url:"wss://ec2-3-92-185-52.compute-1.amazonaws.com/anon/app/af650d53-f31b-476d-b28b-7db3bd2f620f"});session.open().then(function(e){console.log(e),e.openDoc("af650d53-f31b-476d-b28b-7db3bd2f620f").then(function(e){console.log(e);new Bookmark("websy-bookmark",{app:e})})});