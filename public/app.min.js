"use strict";function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Bookmark=function(){function o(e,t){_classCallCheck(this,o),this.elementId=e;this.options=_extends({},{},t);var n=document.getElementById(this.elementId);if(n){n.addEventListener("click",this.handleClick.bind(this));n.innerHTML="<div>\n      <svg xmlns='http://www.w3.org/2000/svg' class='bookmarkBtn' viewBox='0 0 512 512'>\n        <title>Bookmark</title>\n        <path d='M352 48H160a48 48 0 00-48 48v368l144-128 144 128V96a48 48 0 00-48-48z' fill='none' stroke='currentColor'\n          stroke-linecap='round' stroke-linejoin='round' stroke-width='32' />\n        </svg>\n        <div class='bookmarkPopup' id='bookmarkPopup'></div>\n        <div class='bookmarkContainer' id='bookmarkContainer'>\n          <div class='bookmark-topline'>\n            <span>Bookmarks</span><button class='createNew'>Create new bookmark</button>\n          </div>\n          <div class='btn'>\n          </div>\n          <div>\n            <svg class='search-icon' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 512 512'>\n              <title>Search</title>\n              <path d='M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z' fill='none'\n                stroke='currentColor' stroke-miterlimit='10' stroke-width='32' />\n              <path fill='none' stroke='currentColor' stroke-linecap='round' stroke-miterlimit='10' stroke-width='32'\n                d='M338.29 338.29L448 448' />\n            </svg>\n            <input class='search' type='search'>\n          </div>\n          <hr>\n          <div class='public'>\n            <svg class='caret' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 512 512'>\n              <title>Caret Down</title>\n              <path\n                d='M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z' />\n            </svg>\n            <span>Public bookmarks (0)</span>\n            <h4 class='public-text'>You have no public bookmarks</h4>\n            <p class='public-text'>Right-click on a bookmark and select 'Make public'.</p>\n          </div>\n          <div class='my-bookmarks'>\n            <svg class='caret' xmlns='http://www.w3.org/2000/svg' viewbox='0 0 512 512'>\n              <title>Caret Down</title>\n              <path\n                d='M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z' />\n            </svg>\n            <span>My bookmarks (0)</span>\n            <div id='bookmarkTester'>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class='createNewPopup' id='createForm'>\n    <div class='createTopline'>\n      <h2>Create bookmark</h2>\n      <hr>\n      <svg xmlns='http://www.w3.org/2000/svg' class='closeCreate' viewbox='0 0 512 512'>\n        <title>Close</title>\n        <path fill='none' stroke='currentColor' stroke-linecap='round' stroke-linejoin='round' stroke-width='32'\n          d='M368 368L144 144M368 144L144 368' />\n      </svg><br>\n    </div>\n    <form>\n    <label for='bookmarkName'>Title</label><br>\n      <input type='text' id='bookmarkName' name='bookmarkName'>\n      <label for='bookmarkDescription'>Description <span class='optional'>(optional)</span></label><br>\n      <input type='text' id='bookmarkDescription' name='bookmarkDescription'>\n      <button class='createSubmit' id='createSubmit'>Create</button>\n    </form>\n  </div>\n    ",this.render()}}return _createClass(o,[{key:"render",value:function(){this.options.app.createSessionObject({qInfo:{qId:"BookmarkList",qType:"BookmarkList"},qBookmarkListDef:{qType:"bookmark",qData:{title:"/qMetaDef/title",description:"/qMetaDef/description",sheetId:"/sheetId",selectionFields:"/selectionFields",creationDate:"/creationDate"}}});var t=[],n=[].then(function(e){e.getLayout().then(function(e){console.log(e),!0===e.qBookmarkList.qItems[0].qMeta.published?t.push():n.push()})});console.log("public",t)}},{key:"handleClick",value:function(e){e.target.classList.contains("bookmarkBtn")&&openForm(),e.target.classList.contains("bookmarkPopup")&&closeForm(),e.target.classList.contains("createNew")&&createNewBookmark(),e.target.classList.contains("closeCreate")&&closeBookmark(),e.target.classList.contains("createSubmit")&&this.options.app.createBookmark({qInfo:{qType:"bookmark"},qMetaDef:{title:"".concat(this.el.target.value),description:"".concat(this.el.target.value)}})}}]),o}();function openForm(){var e=document.getElementById("bookmarkPopup");e&&(e.style.display="block");var t=document.getElementById("bookmarkContainer");t&&(t.style.display="block")}function closeForm(){document.getElementById("bookmarkPopup").style.display="none";var e=document.getElementById("bookmarkContainer");e&&(e.style.display="none")}function createNewBookmark(){document.getElementById("createForm").style.display="flex"}function closeBookmark(){document.getElementById("createForm").style.display="none"}var session=enigma.create({schema:schema,url:"wss://ec2-3-92-185-52.compute-1.amazonaws.com/anon/app/af650d53-f31b-476d-b28b-7db3bd2f620f"});session.open().then(function(e){console.log(e),e.openDoc("af650d53-f31b-476d-b28b-7db3bd2f620f").then(function(e){console.log(e);new Bookmark("websy-bookmark",{app:e})})});